#!/usr/bin/env bash

releases_path=https://api.github.com/repos/LogtalkDotOrg/logtalk3/tags
cmd="curl -s $releases_path"

[ "Linux" = "$(uname)" ] && sort="sort_linux" || sort="sort_darwin"

sort_linux(){
  LC_ALL=C sort | xargs
}

sort_darwin(){
  tail -r | tr '\r' ' ' | tr '\n' ' ' | tr -s ' '
}

versions=$(eval $cmd | grep -oE "name\": \"lgt.{1,4}stable\"," | sed -n 's/.*lgt\(.*\)stable.*/\1/p' | sed -n 's/\(.\)\(..\)\(.\)/\1.\2.\3/p' | "${sort}")
echo $versions
